<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- 스키마정의  -->
<!-- 홈페이지관리자 -->
<mapper namespace="com.ssofun.www.systemadmin.mapper.SystemAdminSqlMapper">

	<select id="getAdminByIdAndPw" resultType="com.ssofun.dto.AdminDto">
		SELECT * FROM tb_admin WHERE login_account = #{login_account} AND login_password = #{login_password}
	</select>

	<select id="selectQnaByNonAnswer" resultType="com.ssofun.dto.QnaDto">
		select * from tb_qna where answer_contents is null order by qna_id DESC
	</select>
	
	
	<select id="selectQnaDataBYQnaId" resultType="com.ssofun.dto.QnaDto">
		select * from tb_qna where qna_id = #{qna_id}
	</select>
	
	<select id="selectQnaImageByQnaId" resultType="com.ssofun.dto.Qna_ImageDto">
		select * from tb_qna_image where qna_id = #{qna_id}
	</select>
	
	
	
<!--user_id로 유저정보가져오기 -->
	<select id="selectUserDtoByUserId" resultType="com.ssofun.dto.UserDto">
	 select * from tb_User where user_id = #{user_id}
	</select>
	
	<select id="selectQnaNotNullAnswer" resultType="com.ssofun.dto.QnaDto">
		select * from tb_qna where answer_contents is not null order by qna_id DESC
	</select>


	<update id="updateQnaAnswer">
		UPDATE tb_qna SET answer_contents = #{answer_contents},answer_created_at = now() WHERE qna_id = #{qna_id}
	</update>
	
	



</mapper>