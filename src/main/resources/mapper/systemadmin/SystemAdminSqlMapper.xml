<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"><!-- 스키마정의  -->
<!-- 홈페이지관리자 -->
<mapper namespace="com.ssofun.www.systemadmin.mapper.SystemAdminSqlMapper">

	<select id="getAdminByIdAndPw" resultType="com.ssofun.dto.AdminDto">
		SELECT * FROM tb_admin WHERE login_account = #{login_account} AND login_password = #{login_password}
	</select>

	<select id="selectQnaByNonAnswer" resultType="com.ssofun.dto.QnaDto">
		select * from tb_qna where answer_contents is null order by qna_id
	</select>
	
	
	<select id="selectQnaNotNullAnswer" resultType="com.ssofun.dto.QnaDto">
		select * from tb_qna where answer_contents is not null order by qna_id DESC
	</select>
	
	
	<select id="selectQnaDataBYQnaId" resultType="com.ssofun.dto.QnaDto">
		select * from tb_qna where qna_id = #{qna_id}
	</select>
	
	<select id="selectQnaImageByQnaId" resultType="com.ssofun.dto.Qna_ImageDto">
		select * from tb_qna_image where qna_id = #{qna_id}
	</select>
	
	
	
<!--user_id로 유저정보가져오기 -->
	<select id="selectUserDtoByUserId" resultType="com.ssofun.dto.UserDto">
	 select * from tb_User where user_id = #{user_id}
	</select>
	


<!-- qna답변달기 -->
	<update id="updateQnaAnswer">
		UPDATE tb_qna SET answer_contents = #{answer_contents},answer_created_at = now() WHERE qna_id = #{qna_id}
	</update>
	
	<select id="selectById" resultType="com.ssofun.dto.QnaDto">
		SELECT * FROM tb_qna where id = #{id}
	</select>



<!-- faq관련 -->

	<!-- faq글삽입 -->
	<insert id="systemAdminCreateFaq">
		INSERT INTO tb_faq(admin_id ,faq_category,title ,contents, created_at,used_fg)
		VALUES(#{admin_id},#{faq_category},#{title},#{contents}, now(),1)
	</insert>
	
	
	<!-- faq글목록가져오기 -->
	<select id="selectAllFaq" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq ORDER BY faq_id DESC;		
	</select>
	
	
	<!-- adminid에 해당되는 admin정보 가져옴 -->
	<select id="selectAdminDtoByAdminId" resultType="com.ssofun.dto.AdminDto">
		SELECT * FROM tb_admin where admin_id = #{adminId};
	</select>
	
	
	<!-- faqId로 해당되는 faq글 가져옴 -->
	<select id="selectFaqDtoByfaqId" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq WHERE faq_id = #{faqId};
	</select>
	
	<update id="updateFaqDataByFaqId">
		UPDATE tb_faq SET faq_category = #{faq_category},title = #{title}, contents = #{contents} WHERE faq_id = #{faq_id};	
	</update>

	<delete id="deleteFaqDataByFaqId">
		DELETE FROM tb_faq WHERE faq_id = #{faqId};
	</delete>


	<select id="selectFaqFunding" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq tf
		WHERE tf.faq_category = 'categoryFunding'	
	</select>
	
	<select id="selectFaqStore" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq tf
		WHERE tf.faq_category = 'categoryStore'	
	</select>

	<select id="selectFaqShipping" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq tf
		WHERE tf.faq_category = 'categoryShipping'	
	</select>
	
	<select id="selectFaqUser" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq tf
		WHERE tf.faq_category = 'categoryUser'	
	</select>
	
	<select id="selectFaqCustomerService" resultType="com.ssofun.dto.FaqDto">
		SELECT * FROM tb_faq tf
		WHERE tf.faq_category = 'categoryCustomerService'	
	</select>
	
	


</mapper>